<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimpleIni: simpleini</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SimpleIni
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">simpleini </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><img src="https://github.com/brofield/simpleini/actions/workflows/build-and-test.yml/badge.svg" alt="Latest Test Results" style="pointer-events: none;" class="inline"/></p>
<p>A cross-platform library that provides a simple API to read and write INI-style configuration files. It supports data files in ASCII, MBCS and Unicode. It is designed explicitly to be portable to any platform and has been tested on Windows, WinCE and Linux. Released as open-source and free using the MIT licence.</p>
<p><a href="https://brofield.github.io/simpleini/">Full documentation</a></p>
<h1><a class="anchor" id="autotoc_md0"></a>
Feature Summary</h1>
<ul>
<li>MIT Licence allows free use in all software (including GPL and commercial)</li>
<li>multi-platform: Windows (from 95 to 11, CE), Linux, MacOS</li>
<li>loading and saving of INI-style configuration files</li>
<li>configuration files can have any newline format on all platforms</li>
<li>liberal acceptance of file format<ul>
<li>key/values with no section, keys with no value</li>
<li>removal of whitespace around sections, keys and values</li>
</ul>
</li>
<li>support for multi-line values (values with embedded newline characters)</li>
<li>optional support for multiple keys with the same name</li>
<li>optional case-insensitive sections and keys (for ASCII characters only)</li>
<li>saves files with sections and keys in the same order as they were loaded</li>
<li>preserves comments on the file, section and keys where possible</li>
<li>supports both char or wchar_t programming interfaces</li>
<li>supports both MBCS (system locale) and UTF-8 file encodings</li>
<li>supports ICU as conversion library on all platforms</li>
<li>system locale does not need to be UTF-8 on Linux/Unix to load UTF-8 file</li>
<li>support for non-ASCII characters in section, keys, values and comments</li>
<li>support for non-standard character types or file encodings via user-written converter classes</li>
<li>support for adding/modifying values programmatically</li>
<li>should compile with no warnings in most compilers</li>
</ul>
<h1><a class="anchor" id="autotoc_md1"></a>
Documentation</h1>
<p>Full documentation of the interface is available in doxygen format. See <a href="https://brofield.github.io/simpleini/">latest documentation here</a>.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Examples</h1>
<p>These snippets are included with the distribution in the automatic tests as ts-snippets.cpp.</p>
<h3><a class="anchor" id="autotoc_md3"></a>
SIMPLE USAGE</h3>
<div class="fragment"><div class="line">{c++}</div>
<div class="line">   // simple demonstration</div>
<div class="line"> </div>
<div class="line">   CSimpleIniA ini;</div>
<div class="line">   ini.SetUnicode();</div>
<div class="line"> </div>
<div class="line">   SI_Error rc = ini.LoadFile(&quot;example.ini&quot;);</div>
<div class="line">   if (rc &lt; 0) { /* handle error */ };</div>
<div class="line">   ASSERT_EQ(rc, SI_OK);</div>
<div class="line"> </div>
<div class="line">   const char* pv;</div>
<div class="line">   pv = ini.GetValue(&quot;section&quot;, &quot;key&quot;, &quot;default&quot;);</div>
<div class="line">   ASSERT_STREQ(pv, &quot;value&quot;);</div>
<div class="line"> </div>
<div class="line">   ini.SetValue(&quot;section&quot;, &quot;key&quot;, &quot;newvalue&quot;);</div>
<div class="line"> </div>
<div class="line">   pv = ini.GetValue(&quot;section&quot;, &quot;key&quot;, &quot;default&quot;);</div>
<div class="line">   ASSERT_STREQ(pv, &quot;newvalue&quot;);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md4"></a>
LOADING DATA</h3>
<div class="fragment"><div class="line">{c++}</div>
<div class="line">   // load from a data file</div>
<div class="line">   CSimpleIniA ini;</div>
<div class="line">   SI_Error rc = ini.LoadFile(&quot;example.ini&quot;);</div>
<div class="line">   if (rc &lt; 0) { /* handle error */ };</div>
<div class="line">   ASSERT_EQ(rc, SI_OK);</div>
<div class="line"> </div>
<div class="line">   // load from a string</div>
<div class="line">   const std::string example = &quot;[section]\nkey = value\n&quot;;</div>
<div class="line">   CSimpleIniA ini;</div>
<div class="line">   SI_Error rc = ini.LoadData(example);</div>
<div class="line">   if (rc &lt; 0) { /* handle error */ };</div>
<div class="line">   ASSERT_EQ(rc, SI_OK);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md5"></a>
GETTING SECTIONS AND KEYS</h3>
<div class="fragment"><div class="line">{c++}</div>
<div class="line">   // get all sections</div>
<div class="line">   CSimpleIniA::TNamesDepend sections;</div>
<div class="line">   ini.GetAllSections(sections);</div>
<div class="line"> </div>
<div class="line">   // get all keys in a section</div>
<div class="line">   CSimpleIniA::TNamesDepend keys;</div>
<div class="line">   ini.GetAllKeys(&quot;section1&quot;, keys);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6"></a>
GETTING VALUES</h3>
<div class="fragment"><div class="line">{c++}</div>
<div class="line">   // get the value of a key that doesn&#39;t exist</div>
<div class="line">   const char* pv;</div>
<div class="line">   pv = ini.GetValue(&quot;section1&quot;, &quot;key99&quot;);</div>
<div class="line">   ASSERT_EQ(pv, nullptr);</div>
<div class="line"> </div>
<div class="line">   // get the value of a key that does exist</div>
<div class="line">   pv = ini.GetValue(&quot;section1&quot;, &quot;key1&quot;);</div>
<div class="line">   ASSERT_STREQ(pv, &quot;value1&quot;);</div>
<div class="line"> </div>
<div class="line">   // get the value of a key which may have multiple </div>
<div class="line">   // values. If hasMultiple is true, then there are</div>
<div class="line">   // multiple values and just one value has been returned</div>
<div class="line">   bool hasMulti;</div>
<div class="line">   pv = ini.GetValue(&quot;section1&quot;, &quot;key1&quot;, nullptr, &amp;hasMulti);</div>
<div class="line">   ASSERT_STREQ(pv, &quot;value1&quot;);</div>
<div class="line">   ASSERT_EQ(hasMulti, false);</div>
<div class="line"> </div>
<div class="line">   pv = ini.GetValue(&quot;section1&quot;, &quot;key2&quot;, nullptr, &amp;hasMulti);</div>
<div class="line">   ASSERT_STREQ(pv, &quot;value2.1&quot;);</div>
<div class="line">   ASSERT_EQ(hasMulti, true);</div>
<div class="line"> </div>
<div class="line">   // get all values of a key with multiple values</div>
<div class="line">   CSimpleIniA::TNamesDepend values;</div>
<div class="line">   ini.GetAllValues(&quot;section1&quot;, &quot;key2&quot;, values);</div>
<div class="line"> </div>
<div class="line">   // sort the values into a known order, in this case we want</div>
<div class="line">   // the original load order</div>
<div class="line">   values.sort(CSimpleIniA::Entry::LoadOrder());</div>
<div class="line"> </div>
<div class="line">   // output all of the items</div>
<div class="line">   CSimpleIniA::TNamesDepend::const_iterator it;</div>
<div class="line">   for (it = values.begin(); it != values.end(); ++it) {</div>
<div class="line">       printf(&quot;value = &#39;%s&#39;\n&quot;, it-&gt;pItem);</div>
<div class="line">   }</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md7"></a>
MODIFYING DATA</h3>
<div class="fragment"><div class="line">{c++}</div>
<div class="line">   // add a new section </div>
<div class="line">   rc = ini.SetValue(&quot;section1&quot;, nullptr, nullptr);</div>
<div class="line">   if (rc &lt; 0) { /* handle error */ };</div>
<div class="line">   ASSERT_EQ(rc, SI_INSERTED); </div>
<div class="line"> </div>
<div class="line">   // not an error to add one that already exists</div>
<div class="line">   rc = ini.SetValue(&quot;section1&quot;, nullptr, nullptr);</div>
<div class="line">   if (rc &lt; 0) { /* handle error */ };</div>
<div class="line">   ASSERT_EQ(rc, SI_UPDATED);</div>
<div class="line"> </div>
<div class="line">   // get the value of a key that doesn&#39;t exist</div>
<div class="line">   const char* pv;</div>
<div class="line">   pv = ini.GetValue(&quot;section2&quot;, &quot;key1&quot;, &quot;default-value&quot;);</div>
<div class="line">   ASSERT_STREQ(pv, &quot;default-value&quot;);</div>
<div class="line"> </div>
<div class="line">   // adding a key (the section will be added if needed)</div>
<div class="line">   rc = ini.SetValue(&quot;section2&quot;, &quot;key1&quot;, &quot;value1&quot;);</div>
<div class="line">   if (rc &lt; 0) { /* handle error */ };</div>
<div class="line">   ASSERT_EQ(rc, SI_INSERTED);</div>
<div class="line"> </div>
<div class="line">   // ensure it is set to expected value</div>
<div class="line">   pv = ini.GetValue(&quot;section2&quot;, &quot;key1&quot;, nullptr);</div>
<div class="line">   ASSERT_STREQ(pv, &quot;value1&quot;);</div>
<div class="line"> </div>
<div class="line">   // change the value of a key</div>
<div class="line">   rc = ini.SetValue(&quot;section2&quot;, &quot;key1&quot;, &quot;value2&quot;);</div>
<div class="line">   if (rc &lt; 0) { /* handle error */ };</div>
<div class="line">   ASSERT_EQ(rc, SI_UPDATED);</div>
<div class="line"> </div>
<div class="line">   // ensure it is set to expected value</div>
<div class="line">   pv = ini.GetValue(&quot;section2&quot;, &quot;key1&quot;, nullptr);</div>
<div class="line">   ASSERT_STREQ(pv, &quot;value2&quot;);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md8"></a>
DELETING DATA</h3>
<div class="fragment"><div class="line">{c++}</div>
<div class="line">   // deleting a key from a section. Optionally the entire</div>
<div class="line">   // section may be deleted if it is now empty.</div>
<div class="line">   bool done, deleteSectionIfEmpty = true;</div>
<div class="line">   done = ini.Delete(&quot;section1&quot;, &quot;key1&quot;, deleteSectionIfEmpty);</div>
<div class="line">   ASSERT_EQ(done, true);</div>
<div class="line">   done = ini.Delete(&quot;section1&quot;, &quot;key1&quot;);</div>
<div class="line">   ASSERT_EQ(done, false);</div>
<div class="line"> </div>
<div class="line">   // deleting an entire section and all keys in it</div>
<div class="line">   done = ini.Delete(&quot;section2&quot;, nullptr);</div>
<div class="line">   ASSERT_EQ(done, true);</div>
<div class="line">   done = ini.Delete(&quot;section2&quot;, nullptr);</div>
<div class="line">   ASSERT_EQ(done, false);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md9"></a>
SAVING DATA</h3>
<div class="fragment"><div class="line">{c++}</div>
<div class="line">   // save the data to a string</div>
<div class="line">   std::string data;</div>
<div class="line">   rc = ini.Save(data);</div>
<div class="line">   if (rc &lt; 0) { /* handle error */ };</div>
<div class="line">   ASSERT_EQ(rc, SI_OK);</div>
<div class="line"> </div>
<div class="line">   // save the data back to the file</div>
<div class="line">   rc = ini.SaveFile(&quot;example2.ini&quot;);</div>
<div class="line">   if (rc &lt; 0) { /* handle error */ };</div>
<div class="line">   ASSERT_EQ(rc, SI_OK);</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
